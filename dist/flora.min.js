/*
FloraJS
Copyright (c) 2013 Vince Allen | vince@vinceallen.com | http://www.vinceallen.com | florajs.com/license
*/
/* Version: 2.0.1 */
/* Build time: May 28, 2013 01:22:11 */var Flora={},exports=Flora;
(function(c){function u(a){this._borders=[];this.id=a||u._idCount;u._idCount++}function n(a){this._gradients=[];this._colors=[];this.id=a||n._idCount;n._idCount++}function J(){}function A(a){var a=a||{},b,e;this.world=a.world||Burner.System.firstWorld();this.position=a.position||"top left";this.text=a.text||"";this.opacity=0===a.opacity?0:a.opacity||0.75;this.color=a.color||[255,255,255];this.borderWidth=a.borderWidth||0;this.borderStyle=a.borderStyle||"none";this.borderColor=a.borderColor||[204,
204,204];this.colorMode="rgb";this.el=document.createElement("div");this.el.id="caption";this.el.className="caption ";e=this.position.split(" ");a=0;for(b=e.length;a<b;a++)this.el.className=this.el.className+"caption"+c.Utils.capitalizeFirstLetter(e[a])+" ";this.el.style.opacity=this.opacity;this.el.style.color=this.colorMode+"("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")";this.el.style.borderWidth=this.borderWidth+"px";this.el.style.borderStyle=this.borderStyle;this.el.style.borderColor=
"string"===typeof this.borderColor?this.borderColor:this.colorMode+"("+this.borderColor[0]+", "+this.borderColor[1]+", "+this.borderColor[2]+")";this.el.appendChild(document.createTextNode(this.text));document.getElementById("caption")&&document.getElementById("caption").parentNode.removeChild(document.getElementById("caption"));this.world.el.appendChild(this.el)}function B(a){var b=this,a=a||{},e,d;this.world=a.world||c.universe.first();this.position=a.position||"top left";this.opacity=0===a.opacity?
0:a.opacity||0.75;this.color=a.color||[255,255,255];this.borderWidth=a.borderWidth||0;this.borderStyle=a.borderStyle||"none";this.borderColor=a.borderColor||[204,204,204];this.colorMode="rgb";this.text=Burner.System.supportedFeatures.touch?c.config.touchMap.stats+"-finger tap = stats | "+c.config.touchMap.pause+"-finger tap = pause | "+c.config.touchMap.reset+"-finger tap = reset":"'"+String.fromCharCode(c.config.keyMap.pause).toLowerCase()+"' = pause | '"+String.fromCharCode(c.config.keyMap.resetSystem).toLowerCase()+
"' = reset | '"+String.fromCharCode(c.config.keyMap.stats).toLowerCase()+"' = stats";this.el=document.createElement("div");this.el.id="inputMenu";this.el.className="inputMenu ";d=this.position.split(" ");a=0;for(e=d.length;a<e;a++)this.el.className=this.el.className+"inputMenu"+c.Utils.capitalizeFirstLetter(d[a])+" ";this.el.style.opacity=this.opacity;this.el.style.color=this.colorMode+"("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")";this.el.style.borderWidth=this.borderWidth+"px";this.el.style.borderStyle=
this.borderStyle;this.el.style.borderColor="string"===typeof this.borderColor?this.borderColor:this.colorMode+"("+this.borderColor[0]+", "+this.borderColor[1]+", "+this.borderColor[2]+")";this.el.appendChild(document.createTextNode(this.text));document.getElementById("inputMenu")&&document.getElementById("inputMenu").parentNode.removeChild(document.getElementById("inputMenu"));Burner.System.supportedFeatures.touch?c.Utils.addEvent(this.el,"touchstart",function(){b.destroy()}):c.Utils.addEvent(this.el,
"mouseup",function(){b.destroy()});this.world.el.appendChild(this.el)}function l(a){a=a||{};a.name=a.name||"Mover";Burner.Item.call(this,a)}function m(a){a=a||{};a.name=a.name||"Agent";c.Mover.call(this,a)}function K(a){c.Mover.call(this,a||{});this.name="Walker"}function s(a){a=a||{};a.name=a.name||"Sensor";c.Mover.call(this,a)}function C(a){a=a||{};a.name=a.name||"Connector";Burner.Item.call(this,a)}function L(a){a=a||{};a.name=a.name||"Point";c.Mover.call(this,a)}function v(a){a=a||{};a.name=a.name||
"Particle";c.Agent.call(this,a)}function w(a){a=a||{};a.name=a.name||"ParticleSystem";c.Agent.call(this,a)}function D(a){a=a||{};a.name=a.name||"Oscillator";Burner.Item.call(this,a)}function M(a){a=a||{};a.name=a.name||"Liquid";c.Agent.call(this,a)}function E(a){a=a||{};a.name=a.name||"Attractor";c.Agent.call(this,a)}function F(a){a=a||{};a.name=a.name||"Repeller";c.Agent.call(this,a)}function G(a){if(!a||!a.type)throw Error("Stimulus: options.type is required.");a.name=a.type.substr(0,1).toUpperCase()+
a.type.toLowerCase().substr(1,a.type.length);c.Agent.call(this,a)}function H(a){a=a||{};a.name=a.name||"FlowField";Burner.Item.call(this,a)}function P(a){var b,e;if(c.Interface.checkRequiredParams(a,{location:"object",scale:"number",angle:"number",opacity:"number",width:"number",height:"number",colorMode:"string",color:"array"}))return b=document.createElement("div"),e=document.createElement("div"),b.className="flowFieldMarker item",e.className="nose",b.appendChild(e),b.style.cssText=Burner.System.getCSSText({x:a.location.x-
a.width/2,y:a.location.y-a.height/2,width:a.width,height:a.height,opacity:a.opacity,angle:a.angle,colorMode:a.colorMode,color0:a.color[0],color1:a.color[1],color2:a.color[2],zIndex:a.zIndex,borderRadius:a.borderRadius}),b}Burner.Classes=Flora;c.config={borderStyles:"none solid dotted dashed double inset outset groove ridge".split(" "),defaultColorList:[{name:"cold",startColor:[88,129,135],endColor:[171,244,255],boxShadowColor:[132,192,201]},{name:"food",startColor:[186,255,130],endColor:[84,187,0],
boxShadowColor:[57,128,0]},{name:"heat",startColor:[255,132,86],endColor:[175,47,0],boxShadowColor:[255,69,0]},{name:"light",startColor:[255,255,255],endColor:[189,148,0],boxShadowColor:[255,200,0]},{name:"oxygen",startColor:[130,136,255],endColor:[49,56,205],boxShadowColor:[60,64,140]}],keyMap:{pause:80,resetSystem:82,stats:83},touchMap:{stats:2,pause:3,reset:4}};c.Interface={checkRequiredParams:function(a,b,e){var d,c,h=!0;for(d in b)if(b.hasOwnProperty(d))try{if("undefined"===typeof a)throw Error("checkRequiredOptions: No options were passed.");
if(!this.checkDataType(this.getDataType(a[d]),b[d].split("|"))||""===a[d])throw h=!1,c=""===a[d]?'checkRequiredOptions: required option "'+d+'" is empty.':"undefined"===typeof a[d]?'checkRequiredOptions: required option "'+d+'" is missing from passed options.':'checkRequiredOptions: passed option "'+d+'" must be type '+b[d]+". Passed as "+this.getDataType(a[d])+".",Error(c);}catch(g){"undefined"!==typeof console&&console.log("ERROR: "+g.message+(e?" from: "+e:""))}return h},checkDataType:function(a,
b){var e,d;e=0;for(d=b.length;e<d;e++)if(a===b[e])return!0;return!1},getDataType:function(a){return"[object Array]"===Object.prototype.toString.call(a)?"array":"[object NodeList]"===Object.prototype.toString.call(a)?"nodeList":typeof a}};c.Utils={extend:function(a,b){function e(){}e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a;a._superClass=b},map:function(a,b,e,d,c){return(a-b)/(e-b)*(c-d)+d},getRandomNumber:function(a,b,e){return e?Math.random()*(b-(a-1))+a:Math.floor(Math.random()*
(b-(a-1)))+a},degreesToRadians:function(a){if("undefined"!==typeof a)return 2*Math.PI*(a/360);"undefined"!==typeof console&&console.log("Error: Utils.degreesToRadians is missing degrees param.");return!1},radiansToDegrees:function(a){if("undefined"!==typeof a)return a*(180/Math.PI);"undefined"!==typeof console&&console.log("Error: Utils.radiansToDegrees is missing radians param.");return!1},constrain:function(a,b,e){return a>e?e:a<b?b:a},clone:function(a){function b(){}b.prototype=a;return new b},
addEvent:function(a,b,e){a.addEventListener?this.addEventHandler=function(a,b,e){a.addEventListener(b,e,!1)}:a.attachEvent&&(this.addEventHandler=function(a,b,e){a.attachEvent("on"+b,e)});this.addEventHandler(a,b,e)},log:function(a){"undefined"!==typeof console&&"undefined"!==typeof console.log?(this.log=function(a){console.log(a)},this.log.call(this,a)):this.log=function(){}},getWindowSize:function(){var a={width:!1,height:!1};"undefined"!==typeof window.innerWidth?a.width=window.innerWidth:"undefined"!==
typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth?a.width=document.documentElement.clientWidth:"undefined"!==typeof document.body&&(a.width=document.body.clientWidth);"undefined"!==typeof window.innerHeight?a.height=window.innerHeight:"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientHeight?a.height=document.documentElement.clientHeight:"undefined"!==typeof document.body&&(a.height=document.body.clientHeight);
return a},getDataType:function(a){return"[object Array]"===Object.prototype.toString.call(a)?"array":"[object NodeList]"===Object.prototype.toString.call(a)?"nodeList":typeof a},capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},isInside:function(a,b){return b&&a.location.x+a.width/2>b.location.x-b.width/2&&a.location.x-a.width/2<b.location.x+b.width/2&&a.location.y+a.height/2>b.location.y-b.height/2&&a.location.y-a.height/2<b.location.y+b.height/2?!0:!1},mouseIsInsideWorld:function(a){var b=
Burner.System.mouse,e=b.location.x,b=b.location.y,d=a.el.offsetLeft,c=a.el.offsetTop;return a&&e>d&&e<d+a.bounds[1]&&b>c&&b<c+a.bounds[2]?!0:!1}};var o={random:function(){return 0.1}};void 0===o&&(o=Math);var j,t=[];for(j=0;256>j;j+=1)t[j]=Math.floor(256*o.random());o=[];for(j=0;512>j;j+=1)o[j]=t[j&255];c.SimplexNoise={grad3:[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],p:t,perm:o,simplex:[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,
0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,
0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]],dot:function(a,b,e){return a[0]*b+a[1]*e},noise:function(a,b){var e,c,f;f=0.5*(Math.sqrt(3)-1);f*=a+b;var h=Math.floor(a+f),g=Math.floor(b+f),i=(3-Math.sqrt(3))/6;f=(h+g)*i;e=a-(h-f);var k=b-(g-f),y,p;e>k?(y=1,p=0):(y=0,p=1);c=e-y+i;var q=k-p+i;f=e-1+2*i;var i=k-1+2*i,j=h&255,g=g&255,h=this.perm[j+this.perm[g]]%12;y=this.perm[j+y+this.perm[g+p]]%12;p=this.perm[j+1+this.perm[g+1]]%12;g=0.5-e*e-k*k;0>g?e=0:
(g*=g,e=g*g*this.dot(this.grad3[h],e,k));k=0.5-c*c-q*q;0>k?c=0:(k*=k,c=k*k*this.dot(this.grad3[y],c,q));q=0.5-f*f-i*i;0>q?f=0:(q*=q,f=q*q*this.dot(this.grad3[p],f,i));return 70*(e+c+f)},noise3d:function(a,b,e){var c,f,h,g=(a+b+e)*(1/3),i=Math.floor(a+g),k=Math.floor(b+g),j=Math.floor(e+g),g=1/6;h=(i+k+j)*g;c=a-(i-h);f=b-(k-h);var p=e-(j-h),q,l,m,n,r,o;c>=f?f>=p?(q=1,m=l=0,r=n=1,o=0):(c>=p?(q=1,m=l=0):(l=q=0,m=1),n=1,r=0,o=1):f<p?(l=q=0,m=1,n=0,o=r=1):c<p?(q=0,l=1,n=m=0,o=r=1):(q=0,l=1,m=0,r=n=1,o=
0);var x=c-q+g,s=f-l+g,u=p-m+g;h=c-n+2*g;var a=f-r+2*g,w=p-o+2*g,e=c-1+3*g,b=f-1+3*g,g=p-1+3*g,i=i&255,t=k&255,v=j&255,k=this.perm[i+this.perm[t+this.perm[v]]]%12,j=this.perm[i+q+this.perm[t+l+this.perm[v+m]]]%12;n=this.perm[i+n+this.perm[t+r+this.perm[v+o]]]%12;i=this.perm[i+1+this.perm[t+1+this.perm[v+1]]]%12;r=0.6-c*c-f*f-p*p;0>r?c=0:(r*=r,c=r*r*this.dot(this.grad3[k],c,f,p));f=0.6-x*x-s*s-u*u;0>f?f=0:(f*=f,f=f*f*this.dot(this.grad3[j],x,s,u));x=0.6-h*h-a*a-w*w;0>x?h=0:(x*=x,h=x*x*this.dot(this.grad3[n],
h,a,w));a=0.6-e*e-b*b-g*g;0>a?e=0:(a*=a,e=a*a*this.dot(this.grad3[i],e,b,g));return 32*(c+f+h+e)}};u._idCount=0;u.prototype.name="BorderPalette";u.prototype.addBorder=function(a){var b,e;if(c.Interface.checkRequiredParams(a,{min:"number",max:"number",style:"string"})){e=c.Utils.getRandomNumber(a.min,a.max);for(b=0;b<e;b++)this._borders.push(a.style)}return this};u.prototype.getBorder=function(){if(0<this._borders.length)return this._borders[c.Utils.getRandomNumber(0,this._borders.length-1)];throw Error("BorderPalette.getBorder: You must add borders via addBorder() before using getBorder().");
};c.BorderPalette=u;n._idCount=0;n.prototype.name="ColorPalette";n.prototype.addColor=function(a){var b,e;if(c.Interface.checkRequiredParams(a,{min:"number",max:"number",startColor:"array",endColor:"array"})){b=c.Utils.getRandomNumber(a.min,a.max);e=n._createColorRange(a.startColor,a.endColor,255);for(a=0;a<b;a++)this._colors.push(e[c.Utils.getRandomNumber(0,e.length-1)])}return this};n.prototype.createGradient=function(a){if(c.Interface.checkRequiredParams(a,{startColor:"array",endColor:"array"}))if(this.startColor=
a.startColor,this.endColor=a.endColor,this.totalColors=a.totalColors||255,0<this.totalColors)this._gradients.push(n._createColorRange(this.startColor,this.endColor,this.totalColors));else throw Error("ColorPalette: total colors must be greater than zero.");};n.prototype.getColor=function(){if(0<this._colors.length)return this._colors[c.Utils.getRandomNumber(0,this._colors.length-1)];throw Error("ColorPalette.getColor: You must add colors via addColor() before using getColor().");};n.prototype.createSampleStrip=
function(a){var b,e,c;b=0;for(e=this._colors.length;b<e;b++)c=document.createElement("div"),c.className="color-sample-strip",c.style.background="rgb("+this._colors[b].toString()+")",a.appendChild(c)};n._createColorRange=function(a,b,c){var d,f=[],h=a[0],g=a[1],a=a[2],i=b[1];d=b[2];var k,j,p,l,b=b[0]-h,i=i-g;k=d-a;for(d=0;d<c;d++)j=parseInt(b*d/c,10)+h,p=parseInt(i*d/c,10)+g,l=parseInt(k*d/c,10)+a,f.push([j,p,l]);return f};c.ColorPalette=n;J.prototype.addColor=function(a){c.Interface.checkRequiredParams(a,
{name:"string",startColor:"array",endColor:"array"})&&(this[a.name]={startColor:a.startColor,endColor:a.endColor});return this};J.prototype.name="ColorTable";J.prototype.getColor=function(a,b,e){var d,f;if("string"===c.Interface.getDataType(a))if(this[a]){a=this[a];b&&(d=a.startColor);e&&(f=a.endColor);if(d&&f||!d&&!f)return{startColor:a.startColor,endColor:a.endColor};if(d)return d;if(f)return f}else throw Error("ColorTable: "+a+" does not exist. Add colors to the ColorTable via addColor().");else throw Error("ColorTable: You must pass a name (string) for the color entry in the table.");
};c.ColorTable=J;A.prototype.name="Caption";A.prototype.reset=function(){};A.prototype.init=function(){};A.prototype.destroy=function(){var a=this.el.id;this.el.parentNode.removeChild(this.el);if(!document.getElementById(a))return!0};c.Caption=A;B.prototype.name="InputMenu";B.prototype.reset=function(){};B.prototype.init=function(){};B.prototype.destroy=function(){var a=this.el.id;this.el.parentNode.removeChild(this.el);if(!document.getElementById(a))return!0};c.InputMenu=B;c.Utils.extend(l,Burner.Item);
l.prototype.init=function(a){this.width=a.width||20;this.height=a.height||20;this.color=a.color||[255,255,255];this.motorSpeed=a.motorSpeed||0;this.angle=a.angle||0;this.pointToDirection=!1===a.pointToDirection?!1:!0;this.draggable=!!a.draggable;this.parent=a.parent||null;this.offsetDistance=a.offsetDistance||30;this.beforeStep=a.beforeStep||null;this.afterStep=a.afterStep||null;this.isPressed=this.isMouseOut=!1;var b=this,a=function(a){b.mouseover(a,b)},e,d=this;e=function(a){d.mousedown(a,d)};var f,
h=this;f=function(a){h.mousemove(a,h)};var g,i=this;g=function(a){i.mouseup(a,i)};var k,j=this;k=function(a){j.mouseout(a,j)};this.draggable&&(c.Utils.addEvent(this.el,"mouseover",a),c.Utils.addEvent(this.el,"mousedown",e),c.Utils.addEvent(this.el,"mousemove",f),c.Utils.addEvent(this.el,"mouseup",g),c.Utils.addEvent(this.el,"mouseout",k))};l.prototype.name="Mover";l.prototype.mouseover=function(){this.isMouseOut=!1;clearInterval(this.mouseOutInterval)};l.prototype.mousedown=function(a){var b,c=a.target||
a.srcElement;a.changedTouches&&(b=a.changedTouches[0]);a.pageX&&a.pageY?(this.offsetX=a.pageX-c.offsetLeft,this.offsetY=a.pageY-c.offsetTop):a.clientX&&a.clientY?(this.offsetX=a.clientX-c.offsetLeft,this.offsetY=a.clientY-c.offsetTop):b&&(this.offsetX=b.pageX-c.offsetLeft,this.offsetY=b.pageY-c.offsetTop);this.isPressed=!0;this.isMouseOut=!1};l.prototype.mousemove=function(a){var b,e,d;this.isPressed&&(this.isMouseOut=!1,a.changedTouches&&(d=a.changedTouches[0]),a.pageX&&a.pageY?(b=a.pageX-this.world.el.offsetLeft,
e=a.pageY-this.world.el.offsetTop):a.clientX&&a.clientY?(b=a.clientX-this.world.el.offsetLeft,e=a.clientY-this.world.el.offsetTop):d&&(b=d.pageX-this.world.el.offsetLeft,e=d.pageY-this.world.el.offsetTop),c.Utils.mouseIsInsideWorld(this.world)?this.location=new Burner.Vector(b,e):this.isPressed=!1)};l.prototype.mouseup=function(){this.isPressed=!1};l.prototype.mouseout=function(a,b){var c=Burner.System.mouse,d,f;b.isPressed&&(b.isMouseOut=!0,b.mouseOutInterval=setInterval(function(){b.isPressed&&
b.isMouseOut&&(d=c.location.x-b.world.el.offsetLeft,f=c.location.y-b.world.el.offsetTop,b.location=new Burner.Vector(d,f))},16))};l.prototype.step=function(){var a,b,e;this.beforeStep&&this.beforeStep.apply(this);if(!this.isStatic&&!this.isPressed&&(this.world.c&&(a=c.Utils.clone(this.velocity),a.mult(-1),a.normalize(),a.mult(this.world.c),this.applyForce(a)),this.applyForce(this.world.gravity),this.applyForces&&this.applyForces(),this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed,
this.minSpeed),this.location.add(this.velocity),this.pointToDirection&&0.1<this.velocity.mag()))this.angle=c.Utils.radiansToDegrees(Math.atan2(this.velocity.y,this.velocity.x));this.controlCamera&&this._checkCameraEdges();this.checkWorldEdges&&this._checkWorldEdges();this.parent&&(this.offsetDistance?(b=this.offsetDistance,e=c.Utils.degreesToRadians(this.parent.angle+this.offsetAngle),a=b*Math.cos(e),b*=Math.sin(e),this.location.x=this.parent.location.x,this.location.y=this.parent.location.y,this.location.add(new Burner.Vector(a,
b))):this.location=this.parent.location);this.acceleration.mult(0);this.life<this.lifespan?this.life+=1:-1!==this.lifespan&&Burner.System.destroyItem(this);this.afterStep&&this.afterStep.apply(this)};l.prototype._seek=function(a){var b=this.world,a=Burner.Vector.VectorSub(a.location,this.location),e=a.mag();a.normalize();e<b.bounds[1]/2?(b=c.Utils.map(e,0,b.bounds[1]/2,0,this.maxSpeed),a.mult(b)):a.mult(this.maxSpeed);a.sub(this.velocity);a.limit(this.maxSteeringForce);return a};l.prototype._checkAvoidEdges=
function(){var a,b;this.location.x<this.avoidWorldEdgesStrength?a=this.maxSpeed:this.location.x>this.world.bounds[1]-this.avoidWorldEdgesStrength&&(a=-this.maxSpeed);a&&(b=new Burner.Vector(a,this.velocity.y),b.sub(this.velocity),b.limit(this.maxSteeringForce),this.applyForce(b));this.location.y<this.avoidWorldEdgesStrength?a=this.maxSpeed:this.location.y>this.world.bounds[2]-this.avoidWorldEdgesStrength&&(a=-this.maxSpeed);a&&(b=new Burner.Vector(this.velocity.x,a),b.sub(this.velocity),b.limit(this.maxSteeringForce),
this.applyForce(b))};l.prototype.drag=function(a){var b=this.velocity.mag(),a=-1*a.c*b*b,b=c.Utils.clone(this.velocity);b.normalize();b.mult(a);return b};l.prototype.attract=function(a){var b=Burner.Vector.VectorSub(a.location,this.location),e;e=b.mag();e=c.Utils.constrain(e,this.width*this.height/8,a.width*a.height);b.normalize();b.mult(a.G*a.mass*this.mass/(e*e));return b};l.prototype.isInside=function(a){return a&&this.location.x+this.width/2>a.location.x-a.width/2&&this.location.x-this.width/
2<a.location.x+a.width/2&&this.location.y+this.height/2>a.location.y-a.height/2&&this.location.y-this.height/2<a.location.y+a.height/2?!0:!1};c.Mover=l;c.Utils.extend(m,c.Mover);m.prototype.init=function(a){a=a||{};m._superClass.prototype.init.call(this,a);this.followMouse=!!a.followMouse;this.maxSteeringForce=a.maxSteeringForce||10;this.seekTarget=a.seekTarget||null;this.flocking=!!a.flocking;this.desiredSeparation=0===a.desiredSeparation?0:a.desiredSeparation||2*this.width;this.separateStrength=
0===a.separateStrength?0:a.separateStrength||0.3;this.alignStrength=0===a.alignStrength?0:a.alignStrength||0.2;this.cohesionStrength=0===a.cohesionStrength?0:a.cohesionStrength||0.1;this.flowField=a.flowField||null;this.sensors=a.sensors||[];this.color=a.color||[197,177,115];this.borderWidth=a.borderWidth||0;this.borderStyle=a.borderStyle||"none";this.borderColor=a.borderColor||"transparent";this.borderRadius=a.borderRadius||this.sensors.length?100:0;this.separateSumForceVector=new Burner.Vector;
this.alignSumForceVector=new Burner.Vector;this.cohesionSumForceVector=new Burner.Vector;this.followTargetVector=new Burner.Vector;this.followDesiredVelocity=new Burner.Vector};m.prototype.name="Agent";m.prototype.applyForces=function(){var a,b,e,d,f,h,g;d=Burner.System._caches.Liquid;g=Burner.System._caches.Attractor;f=Burner.System._caches.Repeller;if(d&&0<d.list.length){a=0;for(b=d.list.length;a<b;a+=1)this.id!==d.list[a].id&&c.Utils.isInside(this,d.list[a])&&this.applyForce(this.drag(d.list[a]))}if(g&&
0<g.list.length){a=0;for(b=g.list.length;a<b;a+=1)this.id!==g.list[a].id&&this.applyForce(this.attract(g.list[a]))}if(f&&0<f.list.length){a=0;for(b=f.list.length;a<b;a+=1)this.id!==f.list[a].id&&this.applyForce(this.attract(f.list[a]))}if(0<this.sensors.length){a=0;for(b=this.sensors.length;a<b;a+=1)if(d=this.sensors[a],f=d.offsetDistance,h=c.Utils.degreesToRadians(this.angle+d.offsetAngle),g=f*Math.cos(h),f*=Math.sin(h),d.location.x=this.location.x,d.location.y=this.location.y,d.location.add(new Burner.Vector(g,
f)),a&&(d.borderStyle="none"),d.activated)this.applyForce(d.getActivationForce(this)),e=!0}!e&&this.motorSpeed&&(a=c.Utils.clone(this.velocity),a.normalize(),this.velocity.mag()>this.motorSpeed?a.mult(-this.motorSpeed):a.mult(this.motorSpeed),this.applyForce(a));this.followMouse&&(a={location:new Burner.Vector(Burner.System.mouse.location.x,Burner.System.mouse.location.y)},this.applyForce(this._seek(a)));this.seekTarget&&this.applyForce(this._seek(this.seekTarget));this.flowField&&(b=this.flowField.resolution,
a=Math.floor(this.location.x/b),b=Math.floor(this.location.y/b),this.flowField.field[a]&&((a=this.flowField.field[a][b])?(this.followTargetVector.x=a.x,this.followTargetVector.y=a.y):(this.followTargetVector.x=this.location.x,this.followTargetVector.y=this.location.y),a={location:this.followTargetVector},this.applyForce(this.follow(a))));this.flocking&&this.flock(Burner.System.getAllItemsByName("Agent"));return this.acceleration};m.prototype.follow=function(a){this.followDesiredVelocity.x=a.location.x;
this.followDesiredVelocity.y=a.location.y;this.followDesiredVelocity.mult(this.maxSpeed);this.followDesiredVelocity.sub(this.velocity);this.followDesiredVelocity.limit(this.maxSteeringForce);return this.followDesiredVelocity};m.prototype.flock=function(a){this.applyForce(this.separate(a).mult(this.separateStrength));this.applyForce(this.align(a).mult(this.alignStrength));this.applyForce(this.cohesion(a).mult(this.cohesionStrength));return this.acceleration};m.prototype.separate=function(a){var b,
c,d,f,h,g=0;this.separateSumForceVector.x=0;this.separateSumForceVector.y=0;h=this.separateSumForceVector;b=0;for(c=a.length;b<c;b+=1)d=a[b],this.className===d.className&&this.id!==d.id&&(f=this.location.distance(d.location),0<f&&f<this.desiredSeparation&&(d=Burner.Vector.VectorSub(this.location,d.location),d.normalize(),d.div(f),h.add(d),g+=1));return 0<g?(h.div(g),h.normalize(),h.mult(this.maxSpeed),h.sub(this.velocity),h.limit(this.maxSteeringForce),h):new Burner.Vector};m.prototype.align=function(a){var b,
c,d,f,h=2*this.width,g,i=0;this.alignSumForceVector.x=0;this.alignSumForceVector.y=0;g=this.alignSumForceVector;b=0;for(c=a.length;b<c;b+=1)d=a[b],f=this.location.distance(d.location),0<f&&f<h&&(this.className===d.className&&this.id!==d.id)&&(g.add(d.velocity),i+=1);return 0<i?(g.div(i),g.normalize(),g.mult(this.maxSpeed),g.sub(this.velocity),g.limit(this.maxSteeringForce),g):new Burner.Vector};m.prototype.cohesion=function(a){var b,c,d,f,h,g=0;this.cohesionSumForceVector.x=0;this.cohesionSumForceVector.y=
0;h=this.cohesionSumForceVector;b=0;for(c=a.length;b<c;b+=1)d=a[b],f=this.location.distance(d.location),0<f&&10>f&&(this.className===d.className&&this.id!==d.id)&&(h.add(d.location),g+=1);return 0<g?(h.div(g),h.sub(this.location),h.normalize(),h.mult(this.maxSpeed),h.sub(this.velocity),h.limit(this.maxSteeringForce),h):new Burner.Vector};m.prototype.getLocation=function(a){if(a){if("x"===a)return this.location.x;if("y"===a)return this.location.y}else return new Burner.Vector(this.location.x,this.location.y)};
m.prototype.getVelocity=function(a){if(a){if("x"===a)return this.velocity.x;if("y"===a)return this.velocity.y}else return new Burner.Vector(this.location.x,this.location.y)};c.Agent=m;c.Utils.extend(K,c.Mover);K.prototype.init=function(a){a=a||{};this.width=a.width||10;this.height=a.height||10;this.perlin=a.perlin||!0;this.remainsOnScreen=!!a.remainsOnScreen;this.perlinSpeed=a.perlinSpeed||0.0050;this.perlinTime=a.perlinTime||0;this.perlinAccelLow=a.perlinAccelLow||-0.075;this.perlinAccelHigh=a.perlinAccelHigh||
0.075;this.offsetX=a.offsetX||1E4*Math.random();this.offsetY=a.offsetY||1E4*Math.random();this.random=!!a.random;this.randomRadius=a.randomRadius||100;this.color=a.color||[255,150,50];this.borderWidth=a.borderWidth||2;this.borderStyle=a.borderStyle||"solid";this.borderColor=a.borderColor||[255,255,255];this.borderRadius=a.borderRadius||100;this.avoidWorldEdges=!!a.avoidWorldEdges;this.avoidWorldEdgesStrength=a.avoidWorldEdgesStrength||50};K.prototype.applyForces=function(){this.perlin?(this.perlinTime+=
this.perlinSpeed,this.remainsOnScreen?(this.acceleration=new Burner.Vector,this.velocity=new Burner.Vector,this.location.x=c.Utils.map(c.SimplexNoise.noise(this.perlinTime+this.offsetX,0,0.1),-1,1,0,this.world.bounds[1]),this.location.y=c.Utils.map(c.SimplexNoise.noise(0,this.perlinTime+this.offsetY,0.1),-1,1,0,this.world.bounds[2])):(this.acceleration.x=c.Utils.map(c.SimplexNoise.noise(this.perlinTime+this.offsetX,0,0.1),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.acceleration.y=c.Utils.map(c.SimplexNoise.noise(0,
this.perlinTime+this.offsetY,0.1),-1,1,this.perlinAccelLow,this.perlinAccelHigh))):this.random&&(this.seekTarget={location:Burner.Vector.VectorAdd(this.location,new Burner.Vector(c.Utils.getRandomNumber(-this.randomRadius,this.randomRadius),c.Utils.getRandomNumber(-this.randomRadius,this.randomRadius)))},this.applyForce(this._seek(this.seekTarget)));this.avoidWorldEdges&&this._checkAvoidEdges()};c.Walker=K;c.Utils.extend(s,c.Mover);s.prototype.init=function(a){a=a||{};s._superClass.prototype.init.call(this,
a);this.type=a.type||"";this.behavior=a.behavior||"LOVE";this.sensitivity=0===a.sensitivity?0:a.sensitivity||2;this.width=0===a.width?0:a.width||7;this.height=0===a.height?0:a.height||7;this.offsetDistance=0===a.offsetDistance?0:a.offsetDistance||30;this.offsetAngle=a.offsetAngle||0;this.opacity=0===a.opacity?0:a.opacity||0.75;this.target=a.target||null;this.activated=!!a.activated;this.activatedColor=a.activatedColor||[255,255,255];this.borderRadius=100;this.borderWidth=2;this.borderStyle="solid";
this.borderColor=[255,255,255]};s.prototype.name="Sensor";s.prototype.step=function(){var a=!1,b,c,d=Burner.System._caches.Heat||{list:[]},f=Burner.System._caches.Cold||{list:[]},h=Burner.System._caches.Predators||{list:[]},g=Burner.System._caches.Light||{list:[]},i=Burner.System._caches.Oxygen||{list:[]},k=Burner.System._caches.Food||{list:[]};if("heat"===this.type&&d.list&&0<d.list.length){b=0;for(c=d.list.length;b<c;b++)this.isInside(this,d.list[b],this.sensitivity)&&(this.target=d.list[b],a=this.activated=
!0)}else if("cold"===this.type&&f.list&&0<f.list.length){b=0;for(c=f.list.length;b<c;b++)this.isInside(this,f.list[b],this.sensitivity)&&(this.target=f.list[b],a=this.activated=!0)}else if("predator"===this.type&&h.list&&0<h.list.length){b=0;for(c=h.list.length;b<c;b+=1)this.isInside(this,h.list[b],this.sensitivity)&&(this.target=h.list[b],a=this.activated=!0)}else if("light"===this.type&&g.list&&0<g.list.length){b=0;for(c=g.list.length;b<c;b++)g.lookup[g.list[b].id]&&this.isInside(this,g.list[b],
this.sensitivity)&&(this.target=g.list[b],a=this.activated=!0)}else if("oxygen"===this.type&&i.list&&0<i.list.length){b=0;for(c=i.list.length;b<c;b+=1)i.lookup[i.list[b].id]&&this.isInside(this,i.list[b],this.sensitivity)&&(this.target=i.list[b],a=this.activated=!0)}else if("food"===this.type&&k.list&&0<k.list.length){b=0;for(c=k.list.length;b<c;b+=1)k.lookup[k.list[b].id]&&this.isInside(this,k.list[b],this.sensitivity)&&(this.target=k.list[b],a=this.activated=!0)}a?this.color=this.activatedColor:
(this.target=null,this.activated=!1,this.color="transparent");this.afterStep&&this.afterStep.apply(this)};s.prototype.getActivationForce=function(a){var b;switch(this.behavior){case "AGGRESSIVE":return this._seek(this.target);case "COWARD":return this._seek(this.target).mult(-1);case "LIKES":var c=Burner.Vector.VectorSub(this.target.location,this.location);b=c.mag();c.normalize();b/=a.maxSpeed;c.mult(b);b=Burner.Vector.VectorSub(c,a.velocity);b.limit(a.maxSteeringForce);return b;case "LOVES":c=Burner.Vector.VectorSub(this.target.location,
this.location);b=c.mag();c.normalize();if(b>this.width)return b/=a.maxSpeed,c.mult(b),b=Burner.Vector.VectorSub(c,a.velocity),b.limit(a.maxSteeringForce),b;a.velocity=new Burner.Vector;a.acceleration=new Burner.Vector;return new Burner.Vector;case "EXPLORER":return c=Burner.Vector.VectorSub(this.target.location,this.location),b=c.mag(),c.normalize(),b/=a.maxSpeed,c.mult(-b),b=Burner.Vector.VectorSub(c,a.velocity),b.limit(0.05*a.maxSteeringForce),b;case "ACCELERATE":return b=a.velocity.clone(),b.normalize(),
b.mult(a.minSpeed);case "DECELERATE":return b=a.velocity.clone(),b.normalize(),b.mult(-a.minSpeed);default:return new Burner.Vector}};s.prototype.isInside=function(a,b,c){return a.location.x+a.width/2>b.location.x-b.width/2-c*b.width&&a.location.x-a.width/2<b.location.x+b.width/2+c*b.width&&a.location.y+a.height/2>b.location.y-b.height/2-c*b.height&&a.location.y-a.height/2<b.location.y+b.height/2+c*b.height?!0:!1};c.Sensor=s;c.Utils.extend(C,Burner.Item);C.prototype.init=function(a){if(!a||!a.parentA||
!a.parentB)throw Error("Connector: both parentA and parentB are required.");this.parentA=a.parentA;this.parentB=a.parentB;this.opacity=0===a.opacity?0:a.opacity||1;this.zIndex=a.zIndex||0;this.borderWidth=1;this.borderRadius=0;this.borderStyle="dotted";this.borderColor=[150,150,150];this.height=this.width=0;this.color="transparent"};C.prototype.name="Connector";C.prototype.step=function(){var a=this.parentA.location,b=this.parentB.location;this.width=Math.floor(Burner.Vector.VectorSub(this.parentA.location,
this.parentB.location).mag());this.location=Burner.Vector.VectorAdd(this.parentA.location,this.parentB.location).div(2);this.angle=c.Utils.radiansToDegrees(Math.atan2(b.y-a.y,b.x-a.x))};c.Connector=C;c.Utils.extend(L,c.Mover);L.prototype.init=function(a){a=a||{};this.width=0===a.width?0:a.width||10;this.height=0===a.height?0:a.height||10;this.opacity=0===a.opacity?0:a.opacity||1;this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.zIndex=0===a.zIndex?0:a.zIndex||1;this.color=a.color||[200,200,200];
this.borderRadius=a.borderRadius||100;this.borderWidth=a.borderWidth||2;this.borderStyle=a.borderStyle||"solid";this.borderColor=a.borderColor||[60,60,60]};L.prototype.name="Point";c.Point=L;c.Utils.extend(v,c.Agent);v.prototype.init=function(a){a=a||{};v._superClass.prototype.init.call(this,a);this.width=0===a.width?0:a.width||20;this.height=0===a.height?0:a.height||20;this.lifespan=0===a.lifespan?0:a.lifespan||50;this.life=0===a.life?0:a.life||0;this.fade=!1===a.fade?!1:!0;this.shrink=!1===a.shrink?
!1:!0;this.checkEdges=!!a.checkEdges;this.maxSpeed=a.maxSpeed||4;this.zIndex=a.zIndex||1;this.color=a.color||[200,200,200];this.borderWidth=a.borderWidth||this.width/4;this.borderStyle=a.borderStyle||"none";this.borderColor=a.borderColor||"transparent";this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||this.width/4;this.boxShadowColor=a.boxShadowColor||"transparent";a.acceleration||(this.acceleration=new Burner.Vector(1,1),this.acceleration.normalize(),this.acceleration.mult(30),
this.acceleration.rotate(c.Utils.getRandomNumber(0,2*Math.PI,!0)));this.initWidth=this.width;this.initHeight=this.height};v.prototype.name="Particle";v.prototype.step=function(){var a;this.world.c&&(a=c.Utils.clone(this.velocity),a.mult(-1),a.normalize(),a.mult(this.world.c),this.applyForce(a));this.applyForce(this.world.gravity);this.applyForces&&this.applyForces();this.checkEdges&&this._checkWorldEdges();this.velocity.add(this.acceleration);this.maxSpeed&&this.velocity.limit(this.maxSpeed);this.minSpeed&&
this.velocity.limit(null,this.minSpeed);this.location.add(this.velocity);this.fade&&(this.opacity=c.Utils.map(this.life,0,this.lifespan,1,0));this.shrink&&(this.width=c.Utils.map(this.life,0,this.lifespan,this.initWidth,0),this.height=c.Utils.map(this.life,0,this.lifespan,this.initHeight,0));this.acceleration.mult(0);this.life<this.lifespan?this.life+=1:-1!==this.lifespan&&Burner.System.destroyItem(this)};c.Particle=v;c.Utils.extend(w,c.Agent);w.prototype.init=function(a){a=a||{};w._superClass.prototype.init.call(this,
a);this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.lifespan=0===a.lifespan?0:a.lifespan||-1;this.life=0===a.life?0:a.life||0;this.width=0===a.width?0:a.width||0;this.height=0===a.height?0:a.height||0;this.burst=0===a.burst?0:a.burst||1;this.burstRate=0===a.burstRate?0:a.burstRate||4;this.emitRadius=0===a.emitRadius?0:a.emitRadius||3;this.startColor=a.startColor||[100,20,20];this.endColor=a.endColor||[255,0,0];this.particleOptions=a.particleOptions||{width:15,height:15,lifespan:50,borderRadius:"100%",
checkEdges:!1,acceleration:null,velocity:null,location:null,maxSpeed:3,fade:!0};this.borderWidth=a.borderWidth||0;this.borderStyle=a.borderStyle||"none";this.borderColor=a.borderColor||"transparent";this.borderRadius=a.borderRadius||0;this.clock=0;var b=new c.ColorPalette;b.addColor({min:12,max:24,startColor:this.startColor,endColor:this.endColor});this.beforeStep=function(){var a,d,f=this.particleOptions.maxSpeed;if(this.life<this.lifespan)this.life+=1;else if(-1!==this.lifespan){Burner.System.destroyItem(this);
return}if(0===this.clock%this.burstRate){a=this.getLocation();d=new Burner.Vector(1,1);d.normalize();d.mult(this.emitRadius);d.rotate(c.Utils.getRandomNumber(0,2*Math.PI,!0));a.add(d);for(d=0;d<this.burst;d++)this.particleOptions.world=this.world,this.particleOptions.life=0,this.particleOptions.color=b.getColor(),this.particleOptions.borderStyle="solid",this.particleOptions.borderColor=b.getColor(),this.particleOptions.boxShadowColor=b.getColor(),this.particleOptions.acceleration=new Burner.Vector(1,
1),this.particleOptions.acceleration.normalize(),this.particleOptions.acceleration.mult(f?f:3),this.particleOptions.acceleration.rotate(c.Utils.getRandomNumber(0,2*Math.PI,!0)),this.particleOptions.velocity=new Burner.Vector,this.particleOptions.location=w.getParticleLocation(a),Burner.System.add("Particle",this.particleOptions)}this.clock++}};w.getParticleLocation=function(a){return new Burner.Vector(a.x,a.y)};w.prototype.name="ParticleSystem";c.ParticleSystem=w;c.Utils.extend(D,Burner.Item);D.prototype.init=
function(a){a=a||{};this.initialLocation=a.initialLocation||new Burner.Vector(this.world.bounds[1]/2,this.world.bounds[2]/2);this.lastLocation=new Burner.Vector;this.amplitude=a.amplitude||new Burner.Vector(this.world.bounds[1]/2-this.width,this.world.bounds[2]/2-this.height);this.acceleration=a.acceleration||new Burner.Vector(0.01,0);this.aVelocity=a.aVelocity||new Burner.Vector;this.isStatic=!!a.isStatic;this.isPerlin=!!a.isPerlin;this.perlinSpeed=a.perlinSpeed||0.0050;this.perlinTime=a.perlinTime||
0;this.perlinAccelLow=a.perlinAccelLow||-2;this.perlinAccelHigh=a.perlinAccelHigh||2;this.perlinOffsetX=a.perlinOffsetX||1E4*Math.random();this.perlinOffsetY=a.perlinOffsetY||1E4*Math.random();this.width=a.width||20;this.height=a.height||20;this.color=a.color||[200,100,0];this.borderWidth=a.borderWidth||0;this.borderStyle=a.borderStyle||"solid";this.borderColor=a.borderColor||[255,150,50];this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||0;this.boxShadowColor=a.boxShadowColor||
[200,100,0]};D.prototype.name="Oscillator";D.prototype.step=function(){var a=this.world,b;this.beforeStep&&this.beforeStep.apply(this);if(!this.isStatic&&!this.isPressed&&(this.isPerlin?(this.perlinTime+=this.perlinSpeed,this.aVelocity.x=c.Utils.map(c.SimplexNoise.noise(this.perlinTime+this.perlinOffsetX,0,0.1),-1,1,this.perlinAccelLow,this.perlinAccelHigh),this.aVelocity.y=c.Utils.map(c.SimplexNoise.noise(0,this.perlinTime+this.perlinOffsetY,0.1),-1,1,this.perlinAccelLow,this.perlinAccelHigh)):this.aVelocity.add(this.acceleration),
this.location.x=this.initialLocation.x+Math.sin(this.aVelocity.x)*this.amplitude.x,this.location.y=this.initialLocation.y+Math.sin(this.aVelocity.y)*this.amplitude.y,this.pointToDirection&&(b=Burner.Vector.VectorSub(this.location,this.lastLocation),this.angle=c.Utils.radiansToDegrees(Math.atan2(b.y,b.x))),this.controlCamera&&this._checkCameraEdges(),(this.checkEdges||this.wrapEdges)&&this._checkWorldEdges(a),0<this.lifespan&&(this.lifespan-=1),this.afterStep&&this.afterStep.apply(this),this.pointToDirection))this.lastLocation.x=
this.location.x,this.lastLocation.y=this.location.y};c.Oscillator=D;c.Utils.extend(M,c.Agent);M.prototype.init=function(a){a=a||{};M._superClass.prototype.init.call(this,a);this.c=0===a.c?0:a.c||1;this.mass=0===a.mass?0:a.mass||50;this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.width=0===a.width?0:a.width||100;this.height=0===a.height?0:a.height||100;this.opacity=0===a.opacity?0:a.opacity||0.75;this.zIndex=0===a.zIndex?0:a.zIndex||1;this.color=a.color||[105,210,231];this.borderWidth=a.borderWidth||
this.width/4;this.borderStyle=a.borderStyle||"double";this.borderColor=a.borderColor||[167,219,216];this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||this.width/8;this.boxShadowColor=a.boxShadowColor||[147,199,196];Burner.System.updateCache(this)};c.Liquid=M;c.Utils.extend(E,c.Agent);E.prototype.init=function(a){a=a||{};E._superClass.prototype.init.call(this,a);this.G=0===a.G?0:a.G||10;this.mass=0===a.mass?0:a.mass||1E3;this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.width=
0===a.width?0:a.width||100;this.height=0===a.height?0:a.height||100;this.opacity=0===a.opacity?0:a.opacity||0.75;this.zIndex=0===a.zIndex?0:a.zIndex||1;this.color=a.color||[92,187,0];this.borderWidth=a.borderWidth||this.width/4;this.borderStyle=a.borderStyle||"double";this.borderColor=a.borderColor||[224,228,204];this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||this.width/4;this.boxShadowColor=a.boxShadowColor||[64,129,0];Burner.System.updateCache(this)};E.prototype.name=
"Attractor";c.Attractor=E;c.Utils.extend(F,c.Agent);F.prototype.init=function(a){a=a||{};F._superClass.prototype.init.call(this,a);this.G=0===a.G?0:a.G||-10;this.mass=0===a.mass?0:a.mass||1E3;this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.width=0===a.width?0:a.width||100;this.height=0===a.height?0:a.height||100;this.opacity=0===a.opacity?0:a.opacity||0.75;this.zIndex=0===a.zIndex?0:a.zIndex||10;this.color=a.color||[250,105,0];this.borderWidth=a.borderWidth||this.width/4;this.borderStyle=a.borderStyle||
"double";this.borderColor=a.borderColor||[224,228,204];this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||this.width/4;this.boxShadowColor=a.boxShadowColor||[250,105,0];Burner.System.updateCache(this)};F.prototype.name="Repeller";c.Repeller=F;var I,z,N={},O,Q={},o=["double","double","dotted","dashed"];j=0;for(t=c.config.defaultColorList.length;j<t;j++)z=c.config.defaultColorList[j],I=new c.ColorPalette,I.addColor({min:20,max:200,startColor:z.startColor,endColor:z.endColor}),
N[z.name]=I,Q[z.name]=z.boxShadowColor;O=new c.BorderPalette;j=0;for(t=o.length;j<t;j++)I=o[j],O.addBorder({min:2,max:10,style:I});c.Utils.extend(G,c.Agent);G.prototype.init=function(a){var a=a||{},b=this.name.toLowerCase();G._superClass.prototype.init.call(this,a);this.mass=0===a.mass?0:a.mass||50;this.isStatic=!1===a.isStatic?!1:a.isStatic||!0;this.width=0===a.width?0:a.width||50;this.height=0===a.height?0:a.height||50;this.opacity=0===a.opacity?0:a.opacity||0.75;this.zIndex=0===a.zIndex?0:a.zIndex||
1;this.color=a.color||N[b].getColor();this.borderWidth=a.borderWidth||this.width/c.Utils.getRandomNumber(2,8);this.borderStyle=a.borderStyle||O.getBorder();this.borderColor=a.borderColor||N[b].getColor();this.borderRadius=a.borderRadius||100;this.boxShadowSpread=a.boxShadowSpread||this.width/c.Utils.getRandomNumber(2,8);this.boxShadowColor=a.boxShadowColor||Q[b];Burner.System.updateCache(this)};G.prototype.name="Stimulus";c.Stimulus=G;c.Utils.extend(H,Burner.Item);H.prototype.init=function(a){a=a||
{};this.resolution=a.resolution||50;this.perlinSpeed=a.perlinSpeed||0.01;this.perlinTime=a.perlinTime||100;this.field=a.field||null;this.createMarkers=a.createMarkers||!1;this.world=a.world||Burner.System.firstWorld()};H.prototype.name="FlowField";H.prototype.build=function(){var a,b,e,d,f,h,g,i,k={},j=this.world,l=Math.ceil(j.bounds[1]/parseFloat(this.resolution)),n=Math.ceil(j.bounds[2]/parseFloat(this.resolution)),m=this.perlinTime,o;for(a=0;a<l;a+=1){o=this.perlinTime;k[a]={};b=0;for(e=n;b<e;b+=
1)d=a*this.resolution+this.resolution/2,f=b*this.resolution+this.resolution/2,h=c.Utils.map(c.SimplexNoise.noise(m,o,0.1),0,1,0,2*Math.PI),g=Math.cos(h),i=Math.sin(h),h=new Burner.Vector(g,i),k[a][b]=h,g=c.Utils.radiansToDegrees(Math.atan2(i,g)),this.createMarkers&&(d=new c.FlowFieldMarker({location:new Burner.Vector(d,f),scale:1,opacity:c.Utils.map(g,-360,360,0.1,0.75),width:this.resolution,height:this.resolution/2,field:h,angle:g,colorMode:"rgb",color:[200,100,50],borderRadius:0,zIndex:0}),j.el.appendChild(d)),
o+=parseFloat(this.perlinSpeed);m+=parseFloat(this.perlinSpeed)}this.field=k};c.FlowField=H;P.prototype.name="FlowFieldMarker";c.FlowFieldMarker=P})(exports);
